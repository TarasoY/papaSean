$(function(){function t(t){return new Promise(function(e,n){var o=new XMLHttpRequest;o.open("GET",t,!0),o.onload=function(){200==o.status?e(JSON.parse(o.response)):n(o.statusText)},o.onerror=function(){n(o.statusText)},o.send()})}function e(t,e,n,o){this.name=t,this.type=e,this.toppings=n,this.meta={},this.setData=function(t){console.log("set data",t)},this.create=function(t){this.meta.createdAt=(new Date).toLocaleString(),console.log("create",t)},this.update=function(t){this.meta.updatedAt=(new Date).toLocaleString(),console.log("update",t)},this.delete=function(t){console.log("delete",t)},this.showToppings=function(){console.log("show toppings")},this.hasTopping=function(t){return this.toppings.includes(t)},this.price=this.toppings.reduce(function(t,e){return t+e.price},0)}t("data/pizza.json").then(function(e){return _pizzas=e,console.log(e),t("data/toppings.json")}).then(function(t){_toppings=t,console.log(t);var n=new e("Hot Margarita","margarita",[{name:"Bacon",price:6.3},{name:"Pepperoni",price:3.2}]);console.log(n.price),console.log(n.create("data")),console.log(n.meta.createdAt)}).catch(function(t){console.log(t)});var e={name:_name,type:_type,toppings:_toppings,meta:{},setData:function(t){console.log("set data",t)},create:function(t){this.meta.createdAt=(new Date).toLocaleString(),console.log("create",t)},update:function(t){this.meta.updatedAt=(new Date).toLocaleString(),console.log("update",t)},delete:function(t){console.log("delete",t)},showToppings:function(){console.log("show toppings")},hasTopping:function(t){return this.toppings.includes(t)},price:toppings.reduce(function(t,e){return t+e.price},0)};Object.assign(e)});