$(function(){function t(t){return new Promise(function(n,e){var o=new XMLHttpRequest;o.open("GET",t,!0),o.onload=function(){200==o.status?n(JSON.parse(o.response)):e(o.statusText)},o.onerror=function(){e(o.statusText)},o.send()})}function n(t,n,e,o){this.name=t,this.type=n,this.toppings=e,this.meta={},this.setData=function(t){console.log("set data",t)},this.create=function(t){this.meta.createdAt=(new Date).toLocaleString(),console.log("create",t)},this.update=function(t){this.meta.updatedAt=(new Date).toLocaleString(),console.log("update",t)},this.delete=function(t){console.log("delete",t)},this.showToppings=function(){console.log("show toppings")},this.hasTopping=function(t){return this.toppings.includes(t)},this.price=this.toppings.reduce(function(t,n){return t+n.price},0)}t("data/pizza.json").then(function(n){return _pizzas=n,console.log(n),t("data/toppings.json")}).then(function(t){_toppings=t,console.log(t);var e=new n("Hot Margarita","margarita",[{name:"Bacon",price:6.3},{name:"Pepperoni",price:3.2}]);console.log(e.price),console.log(e.create("data")),console.log(e.meta.createdAt)}).catch(function(t){console.log(t)})});